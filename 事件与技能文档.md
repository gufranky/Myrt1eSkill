# MyrtleSkill 插件事件与技能文档

本文档记录了 MyrtleSkill CS2 插件中所有事件和技能的详细信息。

## 统计信息

- **事件总数**: 35 个
- **技能总数**: 25 个

---

## 事件列表

### 1. OnlyHeadshotsEvent (只有爆头)
- **文件名**: OnlyHeadshotsEvent.cs
- **内部名称**: OnlyHeadshots
- **显示名称**: 🎯 只有爆头
- **描述**: 只有爆头才能造成伤害！
- **特殊机制**:
  - 监听 `EventPlayerHurt` 事件
  - 检查伤害是否命中头部 (`hitgroup == 1`)
  - 如果不是爆头伤害，将伤害设置为 0

### 2. LowGravityEvent (低重力)
- **文件名**: LowGravityEvent.cs
- **内部名称**: LowGravity
- **显示名称**: 🪶 低重力
- **描述**: 玩家重力降低，跳跃更高！
- **特殊机制**:
  - 设置 `sv_gravity` 为 400（默认 800）
  - 保存原始重力值以便恢复

### 3. DeadlyGrenadesEvent (更致命的手雷)
- **文件名**: DeadlyGrenadesEvent.cs
- **内部名称**: DeadlyGrenades
- **显示名称**: 💣 更致命的手雷
- **描述**: 主武器和副武器被移除，只有无限手雷！
- **特殊机制**:
  - 启用 `sv_infinite_ammo = 1`
  - 禁用商店 `mp_buy_allow_guns = 0`
  - 移除所有玩家的主武器和副武器
  - 当玩家投掷手雷后，延迟 0.3 秒自动补充新手雷
  - 监听 `EventWeaponFire` 事件检测手雷投掷

### 4. InstantRespawnEvent (即时重生)
- **文件名**: InstantRespawnEvent.cs
- **内部名称**: InstantRespawn
- **显示名称**: ⚡ 即时重生
- **描述**: 死亡后立即重生，继续战斗！
- **特殊机制**:
  - 监听 `EventPlayerDeath` 事件
  - 延迟 0.5 秒后重生玩家

### 5. KeepQuietEvent (保持安静)
- **文件名**: StayQuietEvent.cs
- **内部名称**: StayQuiet
- **显示名称**: 🤫 保持安静
- **描述**: 玩家进入完全隐身状态！
- **特殊机制**:
  - 设置玩家透明度为 0（完全透明）
  - 同时隐藏玩家武器（设置武器 Render 透明度为 0）
  - 保存原始缩放值
  - 恢复时还原玩家和武器的渲染状态

### 6. RainyDayEvent (下雨天)
- **文件名**: RainyDayEvent.cs
- **内部名称**: RainyDay
- **显示名称**: 🌧️ 下雨天
- **描述**: 隐身 + 低重力，综合效果！
- **特殊机制**:
  - 组合效果：完全隐身 + 低重力
  - 隐藏武器
  - 设置重力为 400
  - 同时恢复玩家透明度和武器透明度

### 7. ChickenModeEvent (鸡模式)
- **文件名**: ChickenModeEvent.cs
- **内部名称**: ChickenMode
- **显示名称**: 🐔 鸡模式
- **描述**: 所有玩家变成鸡！
- **特殊机制**:
  - 将玩家模型替换为鸡模型 (`chicken`)
  - 玩家进入完全隐身状态
  - 武器也被隐藏
  - 恢复时需要还原原始模型和透明度

### 8. NoScopingEvent (不开镜)
- **文件名**: NoScopingEvent.cs
- **内部名称**: NoScoping
- **显示名称**: 🎯 不开镜
- **描述**: 只有不开镜射击才能造成伤害！
- **特殊机制**:
  - 监听 `EventPlayerHurt` 事件
  - 检查玩家是否正在开镜 (`player.PlayerPawn.Value.ZoomMode == 0`)
  - 开镜射击时伤害设为 0

### 9. NoAmmoEvent (没有弹药)
- **文件名**: NoAmmoEvent.cs
- **内部名称**: NoAmmo
- **显示名称**: 📦 没有弹药
- **描述**: 弹药会逐渐流失，请谨慎使用！
- **特殊机制**:
  - 每 5 秒触发一次弹药流失
  - 使用 `Plugin.AddTimer(5.0f, ...)` 循环

### 10. MiniSizeEvent (迷你尺寸)
- **文件名**: MiniSizeEvent.cs
- **内部名称**: MiniSize
- **显示名称**: 迷你尺寸
- **描述**: 所有玩家变成迷你尺寸！
- **特殊机制**:
  - 设置玩家模型缩放为当前值的 0.5 倍
  - **重要**: 在应用缩放前保存原始缩放值
  - 使用 `sceneNode.Scale *= 0.5f` 应用缩放
  - 恢复时还原原始缩放值

### 11. TopTierPartyEvent (顶级狂欢)
- **文件名**: TopTierPartyEvent.cs
- **内部名称**: TopTierParty
- **显示名称**: 🎊 顶级狂欢
- **描述**: 随机启用两个事件，混乱升级！
- **特殊机制**:
  - 从所有可用事件中随机选择 2 个
  - 过滤掉 NoEvent、TopTierParty、TopTierPartyPlusPlus
  - 同时应用选中的两个事件
  - 恢复时按相反顺序恢复（LIFO）

### 12. TopTierPartyPlusPlusEvent (顶级狂欢++)
- **文件名**: TopTierPartyPlusPlusEvent.cs
- **内部名称**: TopTierPartyPlusPlus
- **显示名称**: 🎊🎊 顶级狂欢++
- **描述**: 终极狂欢！同时启用三个随机事件！绝对的混乱与极致的乐趣！
- **特殊机制**:
  - 从所有可用事件中随机选择 3 个
  - 过滤掉 NoEvent、TopTierParty 系列
  - 同时应用 3 个事件
  - **恢复顺序**: 第三 → 第二 → 第一（LIFO 堆栈模式）
  - 显示多重事件提示信息

### 13. InfiniteAmmoEvent (无限弹药)
- **文件名**: InfiniteAmmoEvent.cs
- **内部名称**: InfiniteAmmo
- **显示名称**: ♾️ 无限弹药
- **描述**: 弹药无限，尽情射击！
- **特殊机制**:
  - 设置 `sv_infinite_ammo = 1`
  - 保存原始设置以便恢复

### 14. VampirismEvent (吸血鬼)
- **文件名**: VampirismEvent.cs
- **内部名称**: Vampirism
- **显示名称**: 🧛 吸血鬼
- **描述**: 造成伤害时回复生命值！
- **特殊机制**:
  - 监听 `EventPlayerHurt` 事件
  - 造成伤害时回复等量生命值（有上限）
  - 最大生命值不超过 100

### 15. TurboModeEvent (涡轮模式)
- **文件名**: TurboModeEvent.cs
- **内部名称**: TurboMode
- **显示名称**: 🏎️ 涡轮模式
- **描述**: 移动速度大幅提升！
- **特殊机制**:
  - 设置所有玩家速度倍率为 2.0 倍
  - 修改 `VelocityModifier` 属性

### 16. SlowMotionEvent (慢动作)
- **文件名**: SlowMotionEvent.cs
- **内部名称**: SlowMotion
- **显示名称**: 🐌 慢动作
- **描述**: 所有动作变慢，时间仿佛静止！
- **特殊机制**:
  - 设置 `sv_cheats = 1`
  - 设置 `host_timescale = 0.5`
  - 恢复时还原为 1.0

### 17. BigHeadsEvent (大头模式)
- **文件名**: BigHeadsEvent.cs
- **内部名称**: BigHeads
- **显示名称**: 🗣️ 大头模式
- **描述**: 玩家头部模型变大！
- **特殊机制**:
  - 调整头部模型缩放

### 18. OneHitKillEvent (一击必杀)
- **文件名**: OneHitKillEvent.cs
- **内部名称**: OneHitKill
- **显示名称**: 💀 一击必杀
- **描述**: 所有伤害一击毙命！
- **特殊机制**:
  - 监听 `EventPlayerHurt` 事件
  - 所有伤害都设为 100+（确保致命）

### 19. NoFlashEvent (无闪光)
- **文件名**: NoFlashEvent.cs
- **内部名称**: NoFlash
- **显示名称**: 🚫 无闪光
- **描述**: 闪光弹效果无效！
- **特殊机制**:
  - 监听 `EventPlayerBlind` 事件
  - 将玩家闪光持续时间设为 0

### 20. KnifeOnlyEvent (只有刀)
- **文件名**: KnifeOnlyEvent.cs
- **内部名称**: KnifeOnly
- **显示名称**: 🔪 只有刀
- **描述**: 移除所有武器，只保留刀！
- **特殊机制**:
  - 移除主武器和副武器
  - 只保留刀武器

### 21. PistolOnlyEvent (只有手枪)
- **文件名**: PistolOnlyEvent.cs
- **内部名称**: PistolOnly
- **显示名称**: 🔫 只有手枪
- **描述**: 只有手枪可以使用！
- **特殊机制**:
  - 移除主武器
  - 保留副武器和刀

### 22. SniperOnlyEvent (只有狙击)
- **文件名**: SniperOnlyEvent.cs
- **内部名称**: SniperOnly
- **显示名称**: 🎯 只有狙击
- **描述**: 只有狙击枪可以使用！
- **特殊机制**:
  - 只允许狙击武器

### 23. ShotgunsOnlyEvent (只有霰弹枪)
- **文件名**: ShotgunsOnlyEvent.cs
- **内部名称**: ShotgunsOnly
- **显示名称**: 🔫 只有霰弹枪
- **描述**: 只有霰弹枪可以使用！
- **特殊机制**:
  - 只允许霰弹枪类武器

### 24. SmgsOnlyEvent (只有冲锋枪)
- **文件名**: SmgsOnlyEvent.cs
- **内部名称**: SmgsOnly
- **显示名称**: 🔫 只有冲锋枪
- **描述**: 只有冲锋枪可以使用！
- **特殊机制**:
  - 只允许冲锋枪类武器

### 25. HeavyMachineGunsOnlyEvent (只有重机枪)
- **文件名**: HeavyMachineGunsOnlyEvent.cs
- **内部名称**: HeavyMachineGunsOnly
- **显示名称**: 🔫 只有重机枪
- **描述**: 只有重机枪可以使用！
- **特殊机制**:
  - 只允许重机枪类武器

### 26. AssaultRiflesOnlyEvent (只有步枪)
- **文件名**: AssaultRiflesOnlyEvent.cs
- **内部名称**: AssaultRiflesOnly
- **显示名称**: 🔫 只有步枪
- **描述**: 只有步枪可以使用！
- **特殊机制**:
  - 只允许步枪类武器

### 27. RandomWeaponEvent (随机武器)
- **文件名**: RandomWeaponEvent.cs
- **内部名称**: RandomWeapon
- **显示名称**: 🎲 随机武器
- **描述**: 每回合获得随机武器！
- **特殊机制**:
  - 每回合开始时给玩家随机武器

### 28. WeaponTossEvent (武器投掷)
- **文件名**: WeaponTossEvent.cs
- **内部名称**: WeaponToss
- **显示名称**: 🎯 武器投掷
- **描述**: 武器可以投掷出去！
- **特殊机制**:
  - 允许玩家投掷当前武器

### 29. HealthBoostEvent (生命提升)
- **文件名**: HealthBoostEvent.cs
- **内部名称**: HealthBoost
- **显示名称**: ❤️ 生命提升
- **描述**: 生命值上限提升！
- **特殊机制**:
  - 设置玩家生命值上限为 150

### 30. ArmorBoostEvent (护甲提升)
- **文件名**: ArmorBoostEvent.cs
- **内部名称**: ArmorBoost
- **显示名称**: 🛡️ 护甲提升
- **描述**: 护甲值上限提升！
- **特殊机制**:
  - 设置玩家护甲值上限为 150

### 31. SpeedBoostEvent (速度提升)
- **文件名**: SpeedBoostEvent.cs
- **内部名称**: SpeedBoost
- **显示名称**: 💨 速度提升
- **描述**: 移动速度提升！
- **特殊机制**:
  - 提升玩家移动速度

### 32. JumpBoostEvent (跳跃提升)
- **文件名**: JumpBoostEvent.cs
- **内部名称**: JumpBoost
- **显示名称**: 🦘 跳跃提升
- **描述**: 跳跃高度提升！
- **特殊机制**:
  - 设置重力为 600（介于默认和低重力之间）

### 33. DamageBoostEvent (伤害提升)
- **文件名**: DamageBoostEvent.cs
- **内部名称**: DamageBoost
- **显示名称**: ⚔️ 伤害提升
- **描述**: 造成的伤害提升！
- **特殊机制**:
  - 监听 `EventPlayerHurt` 事件
  - 将伤害值乘以 1.5 倍

### 34. CritChanceEvent (暴击几率)
- **文件名**: CritChanceEvent.cs
- **内部名称**: CritChance
- **显示名称**: 🎲 暴击几率
- **描述**: 攻击有几率造成双倍伤害！
- **特殊机制**:
  - 监听 `EventPlayerHurt` 事件
  - 20% 几率造成双倍伤害

### 35. NoEvent (无事件)
- **文件名**: NoEvent.cs
- **内部名称**: NoEvent
- **显示名称**: 无事件
- **描述**: 禁用所有事件效果
- **特殊机制**:
  - 空实现，用于事件系统重置

---

## 技能列表

### 1. SpeedBoostSkill (速度提升)
- **文件名**: SpeedBoostSkill.cs
- **内部名称**: SpeedBoost
- **显示名称**: 💨 速度提升
- **描述**: 速度大幅提升
- **类型**: 主动技能
- **冷却时间**: 15 秒
- **特殊机制**:
  - 持续时间: 8 秒
  - 设置速度倍率为 1.8 倍
  - 使用 `player.PlayerPawn.Value.VelocityModifier`

### 2. KnifeOnlySkill (只有刀)
- **文件名**: KnifeOnlySkill.cs
- **内部名称**: KnifeOnly
- **显示名称**: 🔪 只有刀
- **描述**: 移除主武器和副武器，仅保留刀
- **类型**: 被动技能
- **特殊机制**:
  - 移除所有主武器和副武器
  - 只保留刀类武器

### 3. SummonAlliesSkill (召唤队友)
- **文件名**: SummonAlliesSkill.cs
- **内部名称**: SummonAllies
- **显示名称**: 👥 召唤队友
- **描述**: 随机传送 3 名存活的队友到身边
- **类型**: 主动技能
- **冷却时间**: 30 秒
- **特殊机制**:
  - 从存活队友中随机选择 3 名
  - 传送到使用者身边 50 单位范围内

### 4. SlayerLightningSkill (杀手闪电)
- **文件名**: SlayerLightningSkill.cs
- **内部名称**: SlayerLightning
- **显示名称**: ⚡ 杀手闪电
- **描述**: 对范围内最近的敌人造成 50 点伤害
- **类型**: 主动技能
- **冷却时间**: 25 秒
- **特殊机制**:
  - 搜索半径: 400 单位
  - 对最近敌人造成 50 点真实伤害
  - 特效: 电击提示

### 5. DisarmSkill (裁军)
- **文件名**: DisarmSkill.cs
- **内部名称**: Disarm
- **显示名称**: ⚔️ 裁军
- **描述**: 强迫目标丢弃所有武器，仅保留刀
- **类型**: 主动技能
- **冷却时间**: 20 秒
- **特殊机制**:
  - 瞄准最近敌人（半径: 500 单位）
  - 移除目标所有主武器和副武器
  - 只保留刀武器
  - 直接删除武器引用: `weapon.Value.Remove()`

### 6. GlazSkill (格拉兹)
- **文件名**: GlazSkill.cs
- **内部名称**: Glaz
- **显示名称**: 🎯 格拉兹
- **描述**: 开镜时可以穿墙
- **类型**: 被动技能
- **特殊机制**:
  - 监听 `EventPlayerHurt` 事件
  - 检查是否开镜 (`ZoomMode != 0`)
  - 穿墙伤害生效

### 7. TeleportSkill (瞬间移动)
- **文件名**: TeleportSkill.cs
- **内部名称**: Teleport
- **显示名称**: 🌀 瞬间移动
- **描述**: 向前传送一段距离
- **类型**: 主动技能
- **冷却时间**: 10 秒
- **特殊机制**:
  - 传送距离: 计算基于玩家视角方向
  - 向量运算: `eyeAngles.Forward * 300 + currentPos`

### 8. SecondChanceSkill (第二次机会)
- **文件名**: SecondChanceSkill.cs
- **内部名称**: SecondChance
- **显示名称**: ❤️ 第二次机会
- **描述**: 死亡后立即复活，回复 50 点生命值
- **类型**: 被动技能
- **特殊机制**:
  - 监听 `EventPlayerDeath` 事件
  - 延迟 0.5 秒复活
  - 复活后生命值: 50

### 9. AntiFlashSkill (防闪光)
- **文件名**: AntiFlashSkill.cs
- **内部名称**: AntiFlash
- **显示名称**: 🛡️ 防闪光
- **描述**: 完全免疫闪光效果
- **类型**: 被动技能
- **特殊机制**:
  - 监听 `EventPlayerBlind` 事件
  - 检查技能使用者
  - 将闪光时长设为 0: `pawn.FlashDuration = 0.0f`

### 10. HighJumpSkill (超级跳跃)
- **文件名**: HighJumpSkill.cs
- **内部名称**: HighJump
- **显示名称**: 🦘 超级跳跃
- **描述**: 跳跃高度大幅提升
- **类型**: 被动技能
- **特殊机制**:
  - 设置重力为 0.5（默认 1.0）
  - **重要**: 必须调用 `Utilities.SetStateChanged(pawn, "CBasePlayerPawn", "m_flGravityScale")`
  - 否则客户端不会更新

### 11. FlashJumpSkill (闪光跳跃)
- **文件名**: FlashJumpSkill.cs
- **内部名称**: FlashJump
- **显示名称**: ⚡ 闪光跳跃
- **描述**: 被你闪光的敌人会根据闪光时长飞向天空
- **类型**: 被动技能
- **特殊机制**:
  - 监听 `EventPlayerBlind` 事件
  - 检查闪光投掷者为技能使用者
  - 计算向上速度: `BASE_JUMP_VELOCITY + (flashDuration * VELOCITY_PER_SECOND)`
  - 最大速度限制: `MAX_JUMP_VELOCITY = 600`
  - 基础速度: `BASE_JUMP_VELOCITY = 300`
  - 每秒闪光增加: `VELOCITY_PER_SECOND = 50`
  - 应用速度: `pawn.AbsVelocity.Z = jumpVelocity`
  - 自动补充闪光弹给投掷者

### 12. RapidFireSkill (速射)
- **文件名**: RapidFireSkill.cs
- **内部名称**: RapidFire
- **显示名称**: 🔫 速射
- **描述**: 连射速度大幅提升，持续 6 秒
- **类型**: 主动技能
- **冷却时间**: 25 秒
- **特殊机制**:
  - 持续时间: 6 秒
  - 设置武器射速为原来的 2 倍
  - 修改 `weaponEntity.NextAttack` 时间

### 13. CloakingSkill (隐身)
- **文件名**: CloakingSkill.cs
- **内部名称**: Cloaking
- **显示名称**: 👻 隐身
- **描述**: 进入完全隐身状态，持续 6 秒
- **类型**: 主动技能
- **冷却时间**: 30 秒
- **特殊机制**:
  - 持续时间: 6 秒
  - 设置玩家 Render 透明度为 0
  - 恢复时还原透明度为 255

### 14. InvincibilitySkill (无敌)
- **文件名**: InvincibilitySkill.cs
- **内部名称**: Invincibility
- **显示名称**: ⭐ 无敌
- **描述**: 无敌状态，免疫所有伤害，持续 4 秒
- **类型**: 主动技能
- **冷却时间**: 45 秒
- **特殊机制**:
  - 持续时间: 4 秒
  - 监听 `EventPlayerHurt` 事件
  - 在持续时间内将所有伤害设为 0

### 15. ExplosiveBulletsSkill (爆炸子弹)
- **文件名**: ExplosiveBulletsSkill.cs
- **内部名称**: ExplosiveBullets
- **显示名称**: 💥 爆炸子弹
- **描述**: 子弹命中时产生小范围爆炸伤害
- **类型**: 被动技能
- **特殊机制**:
  - 监听 `EventPlayerHurt` 事件
  - 在命中位置产生小范围爆炸
  - 爆炸半径: 100 单位
  - 爆炸伤害: 30 点

### 16. HealthRegenerationSkill (生命恢复)
- **文件名**: HealthRegenerationSkill.cs
- **内部名称**: HealthRegeneration
- **显示名称**: ❤️ 生命恢复
- **描述**: 每秒恢复 10 点生命值，持续 10 秒
- **类型**: 主动技能
- **冷却时间**: 35 秒
- **特殊机制**:
  - 持续时间: 10 秒
  - 每秒恢复: 10 点生命
  - 最大生命值: 100

### 17. AmmoRefillSkill (弹药补充)
- **文件名**: AmmoRefillSkill.cs
- **内部名称**: AmmoRefill
- **显示名称**: 📦 弹药补充
- **描述**: 立即补充所有武器弹药
- **类型**: 主动技能
- **冷却时间**: 20 秒
- **特殊机制**:
  - 设置所有武器弹药为最大值
  - 包括备用弹药

### 18. ArmorBoostSkill (护甲提升)
- **文件名**: ArmorBoostSkill.cs
- **内部名称**: ArmorBoost
- **显示名称**: 🛡️ 护甲提升
- **描述**: 护甲值提升 50 点
- **类型**: 主动技能
- **冷却时间**: 30 秒
- **特殊机制**:
  - 立即增加 50 点护甲
  - 最大护甲值: 150

### 19. DamageBoostSkill (伤害提升)
- **文件名**: DamageBoostSkill.cs
- **内部名称**: DamageBoost
- **显示名称**: ⚔️ 伤害提升
- **描述**: 伤害提升 50%，持续 8 秒
- **类型**: 主动技能
- **冷却时间**: 25 秒
- **特殊机制**:
  - 持续时间: 8 秒
  - 监听 `EventPlayerHurt` 事件
  - 将伤害乘以 1.5 倍

### 20. CriticalHitSkill (暴击)
- **文件名**: CriticalHitSkill.cs
- **内部名称**: CriticalHit
- **显示名称**: 🎲 暴击
- **描述**: 25% 几率造成双倍伤害
- **类型**: 被动技能
- **特殊机制**:
  - 监听 `EventPlayerHurt` 事件
  - 25% 几率触发双倍伤害

### 21. LifestealSkill (吸血)
- **文件名**: LifestealSkill.cs
- **内部名称**: Lifesteal
- **显示名称**: 🧛 吸血
- **描述**: 造成伤害的 30% 转化为生命值
- **类型**: 被动技能
- **特殊机制**:
  - 监听 `EventPlayerHurt` 事件
  - 按照伤害的 30% 回复生命值

### 22. SprintSkill (冲刺)
- **文件名**: SprintSkill.cs
- **内部名称**: Sprint
- **显示名称**: 🏃 冲刺
- **描述**: 短暂大幅提升移动速度
- **类型**: 主动技能
- **冷却时间**: 15 秒
- **特殊机制**:
  - 持续时间: 3 秒
  - 速度提升: 2.5 倍

### 23. WallHackSkill (透视)
- **文件名**: WallHackSkill.cs
- **内部名称**: WallHack
- **显示名称**: 👁️ 透视
- **描述**: 可以看到墙壁后的敌人，持续 5 秒
- **类型**: 主动技能
- **冷却时间**: 40 秒
- **特殊机制**:
  - 持续时间: 5 秒
  - 通过高亮显示敌人实现

### 24. IceTrapSkill (冰冻陷阱)
- **文件名**: IceTrapSkill.cs
- **内部名称**: IceTrap
- **显示名称**: ❄️ 冰冻陷阱
- **描述**: 在脚下放置冰冻陷阱，敌人踩中后减速
- **类型**: 主动技能
- **冷却时间**: 20 秒
- **特殊机制**:
  - 在玩家当前位置放置陷阱
  - 敌人踩中后减速 50%

### 25. FireballSkill (火球术)
- **文件名**: FireballSkill.cs
- **内部名称**: Fireball
- **显示名称**: 🔥 火球术
- **描述**: 发射火球造成范围伤害
- **类型**: 主动技能
- **冷却时间**: 15 秒
- **特殊机制**:
  - 发射火球实体
  - 爆炸半径: 150 单位
  - 爆炸伤害: 60 点

---

## 附录：技术要点

### 客户端-服务器同步
- **关键方法**: `Utilities.SetStateChanged(entity, "ClassName", "PropertyName")`
- **用途**: 通知客户端实体属性已更改
- **常见场景**:
  - 修改重力后必须调用: `Utilities.SetStateChanged(pawn, "CBasePlayerPawn", "m_flGravityScale")`
  - 修改速度后必须调用: `Utilities.SetStateChanged(pawn, "CBasePlayerPawn", "m_flVelocityModifier")`
  - 修改透明度后必须调用: `Utilities.SetStateChanged(entity, "CBaseModelEntity", "m_clrRender")`

### PVS 系统注意事项
- **问题**: 直接删除武器可能导致 PVS (Potentially Visible Set) 崩溃
- **解决方案**:
  - 使用 `sv_infinite_ammo` 而非直接删除武器
  - 如需删除，使用 `weapon.Value.Remove()` 直接删除引用
  - 避免复杂的武器缓存和延迟删除逻辑

### LIFO 恢复模式
- **适用场景**: 嵌套事件效果（如 TopTierParty++）
- **原则**: 后应用的效果先恢复
- **示例**: 应用顺序 1→2→3，恢复顺序 3→2→1

### ConVar 常用命令
- `sv_gravity`: 重力（默认 800）
- `sv_infinite_ammo`: 无限弹药（0/1）
- `mp_friendlyfire`: 友军伤害（0/1）
- `mp_buy_allow_guns`: 允许购买枪械（0/1）
- `mp_player_bot_competitive`: 玩家死后控制机器人（0/1）
- `host_timescale`: 游戏速度（默认 1.0）
- `sv_cheats`: 作弊模式（0/1）

### 状态保存原则
- **关键**: 在应用效果前保存原始状态
- **错误示例**: 先修改缩放，再保存原始值（保存的已是修改后的值）
- **正确示例**: 先保存当前缩放值，再应用修改

---

**文档生成时间**: 2026-02-02
**插件版本**: 基于 Git 提交 00c1853
