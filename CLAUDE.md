# MyrtleSkill Plugin - AI å¼€å‘æŒ‡å—

æœ¬æ–‡æ–‡æ¡£ä¸º AI åŠ©æ‰‹ï¼ˆClaude Codeï¼‰æä¾›å¼€å‘ MyrtleSkill CS2 æ’ä»¶æ—¶çš„æŒ‡å¯¼åŸåˆ™å’Œæ³¨æ„äº‹é¡¹ã€‚

## ğŸ“‹ ç›®å½•

- [ç‰ˆæœ¬ç®¡ç†è§„èŒƒ](#ç‰ˆæœ¬ç®¡ç†è§„èŒƒ)
- [äº‹ä»¶å¼€å‘è§„èŒƒ](#äº‹ä»¶å¼€å‘è§„èŒƒ)
- [æŠ€èƒ½å¼€å‘è§„èŒƒ](#æŠ€èƒ½å¼€å‘è§„èŒƒ)
- [ä»£ç æäº¤è§„èŒƒ](#ä»£ç æäº¤è§„èŒƒ)
- [æ–‡æ¡£æ›´æ–°è§„èŒƒ](#æ–‡æ¡£æ›´æ–°è§„èŒƒ)

---

## ğŸ¯ æ ¸å¿ƒåŸåˆ™

### âš ï¸ é‡è¦æé†’

**æ¯æ¬¡æ·»åŠ æ–°äº‹ä»¶æˆ–æŠ€èƒ½åï¼Œå¿…é¡»åŒæ­¥æ›´æ–°æœ¬æ–‡æ–‡æ¡£ï¼**

---

## ğŸ“Œ ç‰ˆæœ¬ç®¡ç†è§„èŒƒ

### ç‰ˆæœ¬å·è§„åˆ™

1. **ç‰ˆæœ¬å·ç”±ç”¨æˆ·ç®¡ç†**
   - AI **ä¸åº”è¯¥**åœ¨æäº¤ä¿¡æ¯ä¸­åŒ…å«ç‰ˆæœ¬å·ï¼ˆå¦‚ `V2.8.0`ï¼‰
   - ç‰ˆæœ¬å·é€šè¿‡ Git Tag ç”±ç”¨æˆ·æ‰‹åŠ¨åˆ›å»ºå’Œç®¡ç†
   - AI åªè´Ÿè´£æè¿°åŠŸèƒ½å˜æ›´ï¼Œä¸å†³å®šç‰ˆæœ¬å·

2. **æäº¤ä¿¡æ¯æ ¼å¼**
   ```bash
   # âœ… æ­£ç¡®
   feat: å®ç°ç»Ÿä¸€HTML HUDæ˜¾ç¤ºç³»ç»Ÿä¸ä¸‰é‡æŠ€èƒ½æ”¯æŒ
   fix: ä¿®å¤ååˆ€æ— æ•ŒæœŸé—´è¡€é‡ä¿æŠ¤é—®é¢˜
   balance: è°ƒæ•´æ°¸åŠ¨æœºäº‹ä»¶å®½é™æœŸè‡³15ç§’

   # âŒ é”™è¯¯
   feat: V2.8.0 - å®ç°ç»Ÿä¸€HTML HUDæ˜¾ç¤ºç³»ç»Ÿ  # ä¸è¦åŒ…å«ç‰ˆæœ¬å·
   ```

3. **è¡¥ä¸ç‰ˆæœ¬**
   - é™¤éç”¨æˆ·æ˜ç¡®è¯´æ˜ï¼Œå¦åˆ™æ‰€æœ‰æäº¤éƒ½æ˜¯è¡¥ä¸æ›´æ–°
   - ç”¨æˆ·ä¼šå†³å®šä½•æ—¶å‘å¸ƒä¸»ç‰ˆæœ¬ã€æ¬¡ç‰ˆæœ¬æˆ–è¡¥ä¸ç‰ˆæœ¬

### æäº¤ç±»å‹

| ç±»å‹ | å‰ç¼€ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|------|
| æ–°åŠŸèƒ½ | `feat:` | æ–°å¢åŠŸèƒ½ | `feat: å®ç°ç»Ÿä¸€HTML HUDæ˜¾ç¤º` |
| ä¿®å¤ | `fix:` | ä¿®å¤bug | `fix: ä¿®å¤ååˆ€æ— æ•ŒæœŸé—´è¡€é‡ä¿æŠ¤` |
| å¹³è¡¡æ€§ | `balance:` | æ•°å€¼è°ƒæ•´ | `balance: è°ƒæ•´æ°¸åŠ¨æœºå®½é™æœŸè‡³15ç§’` |
| é‡æ„ | `refactor:` | ä»£ç é‡æ„ | `refactor: ä¼˜åŒ–æŠ€èƒ½ç®¡ç†å™¨æ¶æ„` |
| æ–‡æ¡£ | `docs:` | æ–‡æ¡£æ›´æ–° | `docs: æ›´æ–°å¼€å‘æŒ‡å—` |

---

## ğŸª äº‹ä»¶å¼€å‘è§„èŒƒ

### åˆ›å»ºæ–°äº‹ä»¶

1. **æ–‡ä»¶ä½ç½®**: `Events/EventNameEvent.cs`
2. **å‘½åè§„åˆ™**:
   - ç±»å: `EventNameEvent`
   - æ–‡ä»¶å: `EventNameEvent.cs`
   - ä½¿ç”¨ PascalCase

3. **åŸºæœ¬ç»“æ„**:
   ```csharp
   public class EventNameEvent : EntertainmentEvent
   {
       public override string Name => "EventName";
       public override string DisplayName => "ğŸ¯ äº‹ä»¶æ˜¾ç¤ºå";
       public override string Description => "äº‹ä»¶æè¿°";
       public override int Weight { get; set; } = 10;

       public override void OnApply() { }
       public override void OnRevert() { }
   }
   ```

4. **æ³¨å†Œäº‹ä»¶**: åœ¨ `Events/EntertainmentEventManager.cs` çš„ `RegisterEvents()` æ–¹æ³•ä¸­æ³¨å†Œ
   ```csharp
   RegisterEvent(new EventNameEvent());
   ```

### äº‹ä»¶å¼€å‘æ³¨æ„äº‹é¡¹

1. **ç¦ç”¨æŠ€èƒ½**: å¦‚æœäº‹ä»¶éœ€è¦å®Œå…¨æ§åˆ¶æŠ€èƒ½åˆ†é…
   ```csharp
   public override void OnApply()
   {
       Plugin.DisableSkillsThisRound = true;
   }
   ```

2. **å¼ºåˆ¶æŠ€èƒ½åˆ—è¡¨**: ä½¿ç”¨å¼ºåˆ¶æŠ€èƒ½ç³»ç»Ÿè®©æ‰€æœ‰ç©å®¶è·å¾—ç‰¹å®šæŠ€èƒ½
   ```csharp
   var forcedSkills = new List<string> { "KillerFlash", "Meito" };
   Plugin.SkillManager.SetForcedSkills(forcedSkills);
   ```

3. **å¼€å±€æç¤º**:
   - âŒ ä¸è¦ä½¿ç”¨ `PrintToCenter` æ˜¾ç¤ºå¼€å±€æç¤ºï¼ˆå·²ç»Ÿä¸€åˆ° HUDï¼‰
   - âœ… åªä½¿ç”¨ `PrintToChat` æ˜¾ç¤ºèŠå¤©æ¡†æç¤º
   - å±€å†…åŠ¨æ€æç¤ºå¯ä»¥ä¿ç•™ï¼ˆå¦‚è¢«å‡»ä¸­ã€ä¼ é€ç­‰ï¼‰

4. **æ¸…ç†èµ„æº**: åœ¨ `OnRevert()` ä¸­å¿…é¡»æ¸…ç†æ‰€æœ‰æ³¨å†Œçš„ç›‘å¬å™¨å’ŒçŠ¶æ€

### äº‹ä»¶æƒé‡é…ç½®

åœ¨ `configs/EventWeightsConfig.json` ä¸­é…ç½®é»˜è®¤æƒé‡ï¼š
```json
{
  "EventWeights": {
    "EventName": 15
  }
}
```

---

## âš”ï¸ æŠ€èƒ½å¼€å‘è§„èŒƒ

### åˆ›å»ºæ–°æŠ€èƒ½

1. **æ–‡ä»¶ä½ç½®**: `Skills/SkillNameSkill.cs`
2. **å‘½åè§„åˆ™**:
   - ç±»å: `SkillNameSkill`
   - æ–‡ä»¶å: `SkillNameSkill.cs`
   - ä½¿ç”¨ PascalCase

3. **åŸºæœ¬ç»“æ„**:
   ```csharp
   public class SkillNameSkill : PlayerSkill
   {
       public override string Name => "SkillName";
       public override string DisplayName => "ğŸ’€ æŠ€èƒ½æ˜¾ç¤ºå";
       public override string Description => "æŠ€èƒ½æè¿°";
       public override bool IsActive => true/false;  // ä¸»åŠ¨/è¢«åŠ¨
       public override float Cooldown => 30f;  // å†·å´æ—¶é—´ï¼ˆç§’ï¼‰

       public override List<string> ExcludedSkills => new() { };  // äº’æ–¥æŠ€èƒ½

       public override void OnApply(CCSPlayerController player) { }
       public override void OnRevert(CCSPlayerController player) { }
       public override void OnUse(CCSPlayerController player) { }  // ä¸»åŠ¨æŠ€èƒ½
   }
   ```

4. **æ³¨å†ŒæŠ€èƒ½**: åœ¨ `Skills/PlayerSkillManager.cs` çš„ `RegisterSkills()` æ–¹æ³•ä¸­æ³¨å†Œ
   ```csharp
   RegisterSkill(new SkillNameSkill());
   ```

### æŠ€èƒ½å¼€å‘æ³¨æ„äº‹é¡¹

1. **ä¸»åŠ¨æŠ€èƒ½ vs è¢«åŠ¨æŠ€èƒ½**:
   - ä¸»åŠ¨æŠ€èƒ½ (`IsActive = true`): ç©å®¶éœ€è¦æŒ‰é”®æ¿€æ´»ï¼Œæœ‰å†·å´æ—¶é—´
   - è¢«åŠ¨æŠ€èƒ½ (`IsActive = false``): è‡ªåŠ¨ç”Ÿæ•ˆï¼Œæ— éœ€å†·å´

2. **æŠ€èƒ½äº’æ–¥**: ä½¿ç”¨ `ExcludedSkills` å±æ€§å®šä¹‰äº’æ–¥å…³ç³»
   ```csharp
   public override List<string> ExcludedSkills => new() { "SkillA", "SkillB" };
   ```

3. **äº‹ä»¶äº’æ–¥**: ä½¿ç”¨ `ExcludedEvents` å±æ€§å®šä¹‰ä¸äº‹ä»¶çš„äº’æ–¥
   ```csharp
   public override List<string> ExcludedEvents => new() { "NoSkillEvent" };
   ```

4. **æŒä¹…åŒ–çŠ¶æ€**: éœ€è¦è·¨å›åˆä¿å­˜çŠ¶æ€ï¼Œä½¿ç”¨ `Dictionary<ulong, T>`
   ```csharp
   private readonly Dictionary<ulong, int> _playerState = new();
   ```

5. **æ¸…ç†çŠ¶æ€**: åœ¨ `OnRevert()` ä¸­æ¸…ç†æ‰€æœ‰çŠ¶æ€
   ```csharp
   _playerState.Clear();
   ```

### æŠ€èƒ½æƒé‡é…ç½®

åœ¨ `configs/Config.json` ä¸­é…ç½®é»˜è®¤æƒé‡ï¼š
```json
{
  "SkillWeights": {
    "SkillName": 15
  }
}
```

### æŠ€èƒ½ç»„äº’æ–¥

å½“å‰å®šä¹‰çš„æŠ€èƒ½ç»„ï¼ˆå‚è€ƒ `SkillExclusionGroups.md`ï¼‰ï¼š
- **é—ªå…‰å¼¹ç»„**: KillerFlash, SuperFlash, FlashJump, AntiFlash
- **çƒŸé›¾å¼¹ç»„**: ToxicSmoke, DecoyXRay
- **è§†é‡ç»„**: Xray, SuperpowerXray, Wallhack
- **ç”Ÿå­˜ç»„**: SecondChance, Meito, Juggernaut
- **ç§»åŠ¨ç»„**: HeavyArmor, Sprint

---

## ğŸ“ ä»£ç æäº¤è§„èŒƒ

### æäº¤æµç¨‹

1. **æœ¬åœ°æµ‹è¯•**: ç¡®ä¿ç¼–è¯‘é€šè¿‡ï¼ŒåŠŸèƒ½æ­£å¸¸
2. **æŸ¥çœ‹å˜æ›´**: `git status` å’Œ `git diff`
3. **æš‚å­˜å˜æ›´**: `git add <files>`
4. **æäº¤**: `git commit -m "ç±»å‹: æè¿°"`
5. **æ¨é€**: `git push`ï¼ˆä»…åœ¨ç”¨æˆ·è¦æ±‚æ—¶ï¼‰

### æäº¤ä¿¡æ¯æ ¼å¼

```bash
# æ ¼å¼
git commit -m "ç±»å‹: ç®€çŸ­æè¿°

# è¯¦ç»†æè¿°ï¼ˆå¯é€‰ï¼‰
- è¯¦ç»†è¯´æ˜1
- è¯¦ç»†è¯´æ˜2"
```

### æäº¤ç¤ºä¾‹

```bash
# æ–°åŠŸèƒ½
git commit -m "feat: æ·»åŠ å¤§èƒƒè¢‹æŠ€èƒ½

- éšæœºå¢åŠ 200~500ç‚¹ç”Ÿå‘½å€¼
- å…è®¸è¶…è¿‡è¡€é‡ä¸Šé™
- ä¸é‡ç”²æˆ˜å£«æŠ€èƒ½äº’æ–¥"

# ä¿®å¤
git commit -m "fix: ä¿®å¤ååˆ€æ— æ•ŒæœŸé—´è¡€é‡ä¿æŠ¤é€»è¾‘

- ä¿å­˜æ¢å¤åçš„è¡€é‡è€Œéè®¾ç½®ä¸º1
- æ— æ•ŒæœŸé—´æŒç»­æ¢å¤åˆ°ä¿å­˜çš„è¡€é‡å€¼"

# å¹³è¡¡æ€§è°ƒæ•´
git commit -m "balance: è°ƒæ•´æ°¸åŠ¨æœºäº‹ä»¶å®½é™æœŸ

- ä»3ç§’å¢åŠ åˆ°15ç§’
- ç»™ç©å®¶æ›´å……è¶³çš„å‡†å¤‡æ—¶é—´"
```

### âŒ ç¦æ­¢äº‹é¡¹

1. **ä¸è¦åœ¨æäº¤ä¿¡æ¯ä¸­åŒ…å«ç‰ˆæœ¬å·**
2. **ä¸è¦æ‰“ Git Tag**ï¼ˆé™¤éç”¨æˆ·æ˜ç¡®è¦æ±‚ï¼‰
3. **ä¸è¦å¼ºåˆ¶æ¨é€**ï¼ˆç­‰å¾…ç”¨æˆ·ç¡®è®¤ï¼‰
4. **ä¸è¦ä½¿ç”¨ `git commit --amend`** ä¿®æ”¹å·²æ¨é€çš„æäº¤

---

## ğŸ“š æ–‡æ¡£æ›´æ–°è§„èŒƒ

### å¿…é¡»åŒæ­¥æ›´æ–°çš„æ–‡æ¡£

1. **æœ¬æ–‡æ¡£** (`CLAUDE.md`)
   - æ·»åŠ æ–°äº‹ä»¶æˆ–æŠ€èƒ½åæ›´æ–°å¯¹åº”ç« èŠ‚
   - è®°å½•é‡è¦çš„æ¶æ„å†³ç­–

2. **äº‹ä»¶åˆ—è¡¨** (`README.md` æˆ–ä¸“é—¨çš„æ–‡æ¡£)
   - æ·»åŠ äº‹ä»¶è¯´æ˜ã€æ•ˆæœã€æƒé‡

3. **æŠ€èƒ½åˆ—è¡¨** (`README.md` æˆ–ä¸“é—¨çš„æ–‡æ¡£)
   - æ·»åŠ æŠ€èƒ½è¯´æ˜ã€æ•ˆæœã€å†·å´ã€äº’æ–¥å…³ç³»

4. **æ›´æ–°æ—¥å¿—** (`CHANGELOG.md`)
   - è®°å½•æ¯ä¸ªç‰ˆæœ¬çš„åŠŸèƒ½å˜æ›´

### æ–‡æ¡£æ›´æ–°æ—¶æœº

- âœ… **æ·»åŠ æ–°äº‹ä»¶å**: æ›´æ–°äº‹ä»¶åˆ—è¡¨
- âœ… **æ·»åŠ æ–°æŠ€èƒ½å**: æ›´æ–°æŠ€èƒ½åˆ—è¡¨
- âœ… **ä¿®æ”¹æ¶æ„å**: æ›´æ–°æ¶æ„è¯´æ˜
- âœ… **é‡è¦bugä¿®å¤å**: æ›´æ–°å·²çŸ¥é—®é¢˜åˆ—è¡¨

---

## ğŸ”§ å¸¸è§ä»»åŠ¡ç¤ºä¾‹

### æ·»åŠ æ–°äº‹ä»¶

1. åˆ›å»º `Events/NewEventEvent.cs`
2. å®ç° `OnApply()` å’Œ `OnRevert()`
3. åœ¨ `EntertainmentEventManager.cs` æ³¨å†Œäº‹ä»¶
4. ç¼–è¯‘æµ‹è¯•
5. æ›´æ–°æœ¬æ–‡æ¡£

### æ·»åŠ æ–°æŠ€èƒ½

1. åˆ›å»º `Skills/NewSkillSkill.cs`
2. å®ç°æŠ€èƒ½é€»è¾‘
3. åœ¨ `PlayerSkillManager.cs` æ³¨å†ŒæŠ€èƒ½
4. ç¼–è¯‘æµ‹è¯•
5. æ›´æ–°æœ¬æ–‡æ¡£

### ä¿®æ”¹ç°æœ‰åŠŸèƒ½

1. é˜…è¯»ç›¸å…³æ–‡ä»¶
2. ç†è§£ç°æœ‰é€»è¾‘
3. ä¿®æ”¹ä»£ç 
4. ç¼–è¯‘æµ‹è¯•
5. æäº¤å˜æ›´

### ç´§æ€¥bugä¿®å¤

1. å®šä½é—®é¢˜
2. ä¿®å¤ä»£ç 
3. ç¼–è¯‘æµ‹è¯•
4. æäº¤ä¿®å¤ï¼ˆä½¿ç”¨ `fix:` å‰ç¼€ï¼‰
5. å¦‚æœéœ€è¦ï¼Œæ¨é€ä¿®å¤

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
MyrtlePlugin/
â”œâ”€â”€ Events/              # å¨±ä¹äº‹ä»¶
â”‚   â”œâ”€â”€ EntertainmentEvent.cs
â”‚   â”œâ”€â”€ EntertainmentEventManager.cs
â”‚   â””â”€â”€ *Event.cs
â”œâ”€â”€ Skills/              # ç©å®¶æŠ€èƒ½
â”‚   â”œâ”€â”€ PlayerSkill.cs
â”‚   â”œâ”€â”€ PlayerSkillManager.cs
â”‚   â””â”€â”€ *Skill.cs
â”œâ”€â”€ configs/             # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ Config.json
â”‚   â””â”€â”€ EventWeightsConfig.json
â”œâ”€â”€ CLAUDE.md            # æœ¬æ–‡æ¡£
â””â”€â”€ MyrtleSkill.cs      # ä¸»æ’ä»¶ç±»
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

### ä»£ç è´¨é‡

1. **éµå¾ª SOLID åŸåˆ™**
2. **ä¿æŒä»£ç ç®€æ´** - KISS åŸåˆ™
3. **é¿å…é‡å¤ä»£ç ** - DRY åŸåˆ™
4. **å•ä¸€èŒè´£** - æ¯ä¸ªç±»åªåšä¸€ä»¶äº‹

### é”™è¯¯å¤„ç†

1. **æ£€æŸ¥ç©ºå€¼**: ä½¿ç”¨ `?` å’Œ `??` æ“ä½œç¬¦
2. **éªŒè¯æœ‰æ•ˆæ€§**: æ£€æŸ¥ `IsValid` å’Œ `PawnIsAlive`
3. **å¼‚å¸¸æ•è·**: ä½¿ç”¨ try-catch å¤„ç†å¯èƒ½å¤±è´¥çš„ä»£ç 
4. **æ—¥å¿—è¾“å‡º**: ä½¿ç”¨ `Console.WriteLine` è®°å½•å…³é”®æ“ä½œ

### æ€§èƒ½ä¼˜åŒ–

1. **é¿å…é¢‘ç¹çš„åå°„**: ä½¿ç”¨ç¼“å­˜æˆ–ç›´æ¥è®¿é—®
2. **å»¶è¿Ÿæ¸…ç†**: ä½¿ç”¨ `Server.NextFrame()` ç¡®ä¿çŠ¶æ€æ­£ç¡®
3. **å­—å…¸æŸ¥æ‰¾**: ä¼˜å…ˆä½¿ç”¨ `TryGetValue` è€Œéä¸¤æ¬¡å­—å…¸è®¿é—®

### ç”¨æˆ·åé¦ˆ

1. **æ¸…æ™°çš„æç¤º**: ä½¿ç”¨ `PrintToChat` å’Œ `PrintToCenter` æ˜¾ç¤º
2. **è§†è§‰åé¦ˆ**: ä½¿ç”¨ emoji å¢å¼ºå¯è¯»æ€§
3. **åŠæ—¶é€šçŸ¥**: é‡è¦äº‹ä»¶ç«‹å³é€šçŸ¥ç©å®¶

---

## ğŸš« ç¦æ­¢äº‹é¡¹

1. **ä¸è¦ä¿®æ”¹ç‰ˆæœ¬å·** - ç‰ˆæœ¬å·ç”±ç”¨æˆ·ç®¡ç†
2. **ä¸è¦æ‰“ Tag** - Tag ç”±ç”¨æˆ·åˆ›å»º
3. **ä¸è¦å¼ºåˆ¶æ¨é€** - ç­‰å¾…ç”¨æˆ·ç¡®è®¤
4. **ä¸è¦åˆ é™¤å†å²æäº¤** - ä¿ç•™å®Œæ•´å†å²
5. **ä¸è¦ä¿®æ”¹ `.git` ç›®å½•** - å¯èƒ½ç ´åä»“åº“

---

## ğŸ“ è”ç³»ä¸åé¦ˆ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- GitHub Issues: https://github.com/gufranky/Myrt1eSkill/issues
- æäº¤ Pull Request

---

**æœ€åæ›´æ–°**: 2026-02-04
**å½“å‰ç‰ˆæœ¬**: V2.8.0
**ç»´æŠ¤è€…**: myrt1e
